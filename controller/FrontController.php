<?phpnamespace mer\controller;defined ('MER_EXISTS') or die('Illegal Access!!!');require_once MER_SITE . '/base/ApplicationRegistry.php';require_once MER_SITE . '/controller/Request.php';require_once MER_SITE . '/command/CommandResolver.php';class FrontController{	private $appReg;		private function __construct() {}		static function run()	{		$instance = new FrontController();		$instance->init();		$instance->handleRequest();	}		function init()	{		$appReg = \mer\base\ApplicationRegistry::instance();		$appReg->init();	}		function handleRequest()	{		$request = new \mer\controller\Request();				$loader = new \mer\command\AuthenticateDecorator(new \mer\command\LanguageDecorator(new \mer\command\CommandLoader));		$loader->process();				$cmd_r = new \mer\command\CommandResolver();		$commands = $cmd_r->getCommands();				if (is_array($commands))		{			foreach ($commands as $cmd)			{				$cmd_result = $cmd->execute();				if ($cmd_result == MER_CMD_RESP_ERROR) break;			}		}		else		{			$cmd_result = $commands->execute();		}				$params_check = $cmd_r->checkParams();		if ($cmd_result > 0 && $params_check) 		{			$view_file = $cmd_r->getView();			ob_start();			include($view_file);			$view = ob_get_clean();		}				$tpl = \mer\base\Templater::instance();		$tpl->set('url_ua', $request->getLangRequest('ua'));		$tpl->set('url_en', $request->getLangRequest('en'));		$tpl->set('url_ru', $request->getLangRequest('ru'));				$full_view = $cmd_r->getFullView();		include($full_view);		exit;	}}